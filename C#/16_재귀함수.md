# 재귀함수(recursive function)

- 이미 해결한 작은 문제에 업혀 더 큰 문제를 해결하는 방법
- 예: 1에서 5까지의 합을 구하려는데
  - 이미 1~4까지 더한 결과가 10임을 알고 있음
  - 그러면 여기에 5만 더하면 15가 됨
- 프로그래밍에서는 함수A가 매개변수만 바꾸어 다시 함수A를 호출하는 방법으로 구현

```c
// 재귀함수의 예
static uint SumRecursive(uint num)
{
    if (num == 0)
    {
        return 0; // 종료조건
    }
    else
    {
        return num + SumRecursive(num - 1); // 재귀호출
    }
}

static void Main(string[] args)
{
    Console.WriteLine(SumRecursive(3));
}
```

`SumRecursive(3);`  
= return 3 + SumRecursive(2);
= return 3 + (2 + SumRecursive(1));
= return 3 + (2 + (1 + SumRecursive(0)));
= return 3 + (2 + (1 + 0));
= return 6;

## 재귀 함수의 구성요소

- 종료조건(ending condition, base case)
  - 가장 기본이 되는 문제set
  - 더 이상 재귀 함수를 호출하지 않고 값을 반환하는 조건
  - 매우 간단히 함수의 반환 값을 찾을 수 있는 경우
  - 이것이 없으면 함수를 무한히 재귀적으로 호출
    - 재귀문이 끝나지 않아서 문제 발생
- 재귀적 함수 호출
  - 종료조건이 아닌 경우
  - 함수의 인자를 바꿔 스스로를 다시 호출
  - 이때, 함수의 인자는 현재 문제보다 작은 문제를 대표해야 함
  - 즉, 동일한 동작을 보다 작은 문제에 적용
  - 재귀함수 작성할 때 기본적으로 종료조건을 생각하는게 좋음

## 반복문과의 비교

- 매우 단순한 문제는 당연히 반복문이 쉬움
  - 사실 모든 재귀 함수는 반복문으로 해결 가능
- 그러나 복잡한 문제일수록 재귀 함수가 더 편함
  - 이진 검색
  - 트리 구조
  - 퀵 정렬
  - 하노이의 탑
  - 어떤 폴더 아래에 있는 모든 파일 목록 구하기

## 피보나치 수열로 이해하는 재귀 함수

- 제 0항은 0, 제 1항은 1이며, 그 뒤의 모든 항은 바로 앞 두항의 합인 수열
  `0 1 1 2 3 5 8 13 21 34 55 ...`
- 수학적 정의
  F<sub>0</sub> = 0,  
  F<sub>1</sub> = 1,
  F<sub>n</sub> = F<sub>n-1</sub> + F<sub>n-2</sub> , (n > 1)

```c
public static int FibonacciRecursive(uint number)
{
    if (number == 0)
    {
        return 0; // 종료 조건
    }
    if (number == 1)
    {
        return 1; // 종료 조건
    }

    return FibonacciRecursive(number - 2) + FibonacciRecursive(number - 1);
}

// 피보나치 함수 호출
static void Main(string[] args)
{
    FibonacciRecursive(10);
}
```

- 함수는 신뢰의 문제
- 재귀 함수는 더 큰 신뢰를 요구
- Fibonacci(4)를 구하려 할 떄
  - Fibonacci(2), Fibonacci(3)은 반드시 올바른 값을 반환한다 믿어야 함
  - 종료조건:Fibonacci(0)은 0, Fibonacci(1)은 1을 반드시 반환
  - 그 후의 수는 위 종료 조건에 기초하여 값을 계산할 수 있음

## 폴더의 목록을 가져오는 함수(의사코드)

```c
// GetDirectoryNames(path): path 안에 있는 모든 폴더의 이름을 가져오는 함수
// GetFileNames(path): path 안에 있는 모든 파일의 이름을 가져오는 함수

static string[] GetFileNamesRecursive(string path)
{
    string[] fileNames;
    string[] directoryNames = GetDirectoryNames(path);
    for (int i = 0; i < directoryNames.Length; ++i)
    {
        filesNames += GetFileNamesRecursive(directoryNames[i]);
    }
    filesNames += GetFileNames(path);
    return filesNames;
}
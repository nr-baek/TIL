# 출력(Output)

- 프로그램에서 프로그램 외부로 데이터를 보여주는 행위
- 프로그램이 어떤 데이터를 출력할지 아니까 괴상한 데이터들이 없다
- 따라서 입력보다 쉽다

## 서식 지정(formatted) 출력

- C에서 출력을 논할 때 가장 기본이 되는 함수
- 세 가지 종류
  - printf(): 콘솔창(stdout)에 출력
  - fprintf(): 스트림에 출력
  - sprintf(): 문자열에 출력
- fprintf()와 sprintf()는 printf()하고 작동법 동일
  - 첫 번째 매개변수로 '출력할 곳'을 넣어주는게 유일한 차이점

  ```c
  const char* msg = "Hello POCU";

  fprintf(stdout, "%s\n", msg);
  printf("%s\n", msg); /* 위와 동일한 결과 */
  ```
  
### printf()의 첫 번째 매개변수는 문자열

```c
int score = 0;
char ch = 'j';
float pi = 3.14f;
const char* name = "Caty"

printf("Hello POCU"); /* 컴파일 */
printf(score); /* 컴파일 오류 */
printf(ch);    /* 컴파일 오류 */
printf(pi);    /* 컴파일 오류 */
printf(name); /* 컴파일 */
```

- printf()는 그냥 int형 변수를 넣는다고 int를 출력해주지 않음(함수 오버로딩이 없음)
  - C#에서는 console.WriteLine()의 매개변수에 어떤 데이터형을 넣어도 출력해줬음  
    (C#은 함수 오버로딩이 가능)
- 따라서, printf()는 무조건 첫 번쨰 인자로 **문자열** 을 받는다

### 서식 문자열(format string)

```c
printf("Hello POCU");  /* 일반 문자열 */
printf("%d", score);   /* 서식 문자열: 정수 출력 */
printf("%c", ch);      /* 서식 문자열: 문자 출력 */
printf("%f", pi);      /* 서식 문자열: 부동소수점 출력 */
printf("%s", name);    /* 서식 문자열: 문자열 출력 */
pirntf("Hello, %s\nYour score is %d\n", name, score); /* 서식 문자열: 혼합 출력 */
```

- printf()는 일반 문자열 혹은 서식 문자열을 매개변수로 받음
- 서식 문자열
  - %로 시작하는 문자열
  - 소수점 이하 자리수, 자릿수 정렬, 어떤 데이터(숫자, 문자)를 출력할지 등을 알려주는 문자열
- 서식 문자열에는 하나 이상의 데이터가 들어갈 수 있음
- 이때, 서식 지정자의 순서와 동일한 순서로 데이터들을 printf()의 추가 매개변수로 전달

### 일반적인 서식 문자열 형식

`%[플래그][너비][.숫자 정밀도 | .문자열 최소/최대 출력 개수][길이]서식 지정자`

- 일반적으로 '%'뒤에 최대 4개의 지정자를 가질 수 있음

1. 플래그(선택)
2. 너비(선택)
3. 정밀도(선택)
    - 숫자 정밀도
    - 문자열 최소/최대 출력 개수
4. 길이(선택)
5. 서식 지정자(필수)

- 반드시 순서를 지켜 작성해야 함

#### 서식지정자(format specifier)

||출력 서식| 예|
|:-:|-|-|
|%|'%'를 출력|printf("%%\n");|
|c|문자(char) 출력|printf("%c\n",'D');|
|s|문자열(char[]) 출력|printf("%s\n","Lulu");|

- 서식 문자라고도 함
- '%'가 서식 문자열에서 사용 중이므로 출력하려면 어쩔수 없이 반복
  - 이스케이프 문자 '\\'를 출력하려면 '\\\\'를 넣었던 것과 마찬가지
- "%s"쓸 바엔 그냥 문자열을 곧바로 printf() 해도 됨
  - 단, 문자열 두 개 합치거나 문자열 + 숫자 합쳐서 출력할 때 유용

```c
printf(name); /* const char* name = "Lulu"; */
printf("%s",name);
printf("Hello, %s\nYour score is %d\n", name, score);
```

||출력 서식| 예|
|:-:|-|-|
|d|부호있는 정수 출력|printf("%d\n", -10);|
|u|부호없는 정수 출력|printf("%u\n", 10);|
|o|부호없는 정수를 8진수로 출력</br   >숫자 앞에 '0'은 안 붙여줌|printf("%o\n", 10);|
|x|부호없는 정수를 16진수(소문자)로 출력</br   >숫자 앞에 '0x'는 안붙여줌|printf("%x\n", 10);|
|X|부호없는 정수를 16진수(대문자)로 출력</br   >숫자 앞에 '0X'는 안 붙여줌|printf("%X\n", 10);|

- "%u"에 부호있는 수를 넣을 경우, 해당 수의 비트패턴에 해당하는 부호없는 수가 출력  
`printf("%u\n", -10); /* 4294967286 출력 */`
- "%X"는 있는데 "%O"가 없는 이유는 8진수는 숫자로만 이루어져 있기 때문..

||출력 서식| 예|
|:-:|-|-|
|f|부동소수점 출력|printf("%f\n", 3.14);|
|e/E|부동소수점을 지수표기법으로 출력|printf("%e\n",3.14);</br   >printf("%E\n",3.14);|
|p|포인터값을 출력|printf("%p\n",(void*)name);|

- "%p"는 주소를 출력하는데 void* 만 받음
  - 모든 주소는 어차피 길이가 같다고 했으니 어떤 포인터를 void*로 캐스팅해도 안전

##### 너비

|정수|출력 너비</br   >(너비보다 작으면 공백)|printf("%5d\n", num);|
|-|-|-|

- 기본적으로 오른쪽 정렬이 됨
- 몇칸의 너비로 보여줄건지 정할 수 있음

##### 플래그

||출력 서식| 예|
|:-:|-|-|
|-|왼쪽 정렬|printf("%-5d\n", num);|
|0|빈 공백을 0으로 채워줌|printf("%05d\n", num);|
|+|항상 부호(+,-)를 표시|printf("%+5d\n", num);|
|공백|양수인 경우에도 부호칸을 비워둠|printf("% d\n", num);|

- '-' : 기본은 오른쪽 정렬
- ' ' : '+'가 있을 경우 무시됨
- '+' : 기본은 음수 기호만 출력
- '0' : '-'가 있을 경우 무시됨

#### 정밀도

- 서식 지정자 'f'와 함께 사용
  - `최소 너비.소수점 아랫자리 수`
  - (소수점 포함)원래 숫자의 너비보다 최소 너비가 크면 공백으로 채움
  - (소수점 포함하지 않음) 원래 숫자의 소수점 아랫자리 수보다 소수점 아랫자리수가 크면 0으로 채움
  - 기본 소수점 아랫자리 수: 6

### 서식 문자열이 필요한 이유

- 오버로딩 없음
  - printf(int), printf(char) 불가능
- 그리고 임시 문자열 등을 자동으로 생성 안 해줌
  - `printf("Hello" + name + int) /* 컴파일 오류 */`
- 물론 strcat()을 이용해서 프로그래머가 직접 임시 문자열을 관리할 수 있음
- 즉, 서식 문자열은 추가 메모리 할당 없이 있는 자료형을 출력스트림에 문자들로 출력해줌!

#### fprintf( ) 도 똑같다

- 단 여기에는 스트림을 사용

```c
const char* name = "Java";
fprintf(stdout, "Hello, %s\n", name);
```

- 보통 프로그램이 실행할 때 기본적으로 3개의 스트림을 줌
  - stdout(콘솔출력)
  - stdin(콘솔입력)
  - stderr(콘솔 출력임. 하지만 오류메세지를 출력하는 스트림)
  - 이 3개의 스트림을 표준 스트림(standard stream)이라 함
- 모든 출력 스트림에 fprintf()사용 가능
  - 첫 인자로 들어가는 스트림만 달라지고 나머지 매개변수는 그대로

##### stdout

- 계속 봐온 그 콘솔 스트림
- stdout은 보통 라인 버퍼링(line buffering)을 사용
- 버퍼링
  - 출력할 내용이 있어도 곧바로 출력하지 않고 쌓아 둠
  - 어느 정도 버퍼가 차면 그제서야 출력
- 라이 버퍼링: 다음과 같은 경우에 버퍼를 비움
  1) 버퍼가 꽉 차거나
  2) 버퍼에 '\n'가 들어올 때
- 강제로 버퍼를 비우고 싶다면 `fflush(stdout);`을 호출하면 됨

#### sprintf( )도 있다

`int sprintf(char* buffer, const char* format, ...);`

- 그냥 char배열에 출력!
- C++에서 정말 많이 씀
  - 속도가 빠르기 때문
- 다만, 프로그래머가 충분히 큰 버퍼를 잡아주지 않으면 위험

```c
char buffer[100];
int score = 100;
const char* name = "Rachel";

sprintf(buffer, "%s: %d", name, score);

printf("%s\n", buffer);
```

- 그러나 안전하지는 않음..
- strcpy(), strcat()과 같은 이유
  - 소유하지 않은 메모리를 쓸 수 있음..

#### 기타 출력 함수

`int puts(const char* str);`  
`int fputs(cosnt char* str, FILE* stream);`

- puts()
  - 문자열을 stdout에 출력
  - 마지막에 줄도 바꿔줌: '\n'
  - fputs(str, stdout)과 같음

`int putchar(int ch);`  
`int fputc(int ch, FILE* stream);`

- putchar()
  - 문자를 stdout에 출력
  - fputc(ch, stdout)하고 같음

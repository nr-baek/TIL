# 마진 병합 현상과 해결법

마진(margin)이란 요소의 네 방향 바깥 여백 영역을 설정하는 css속성이다.  
여러 요소에 마진값이 넣어져 있을 때 의도치않게 요소의 여백이 줄어들어져있거나 여백을 늘려도 늘어나지 않는 현상들을 겪을 수 있다.  
마진이 병합되는 현상에 대한 내용을 정리해보았다.

## 마진 병합 현상(Margin Collapsing)

마진 병합 현상은 인접하는 블록요소의 상하단의 마진이 병합되는 현상을 말한다.
마진의 크기는 병합되는 마진 중에서 큰 값을 가진 마진의 값으로 병합된다.

### 마진병합현상의 조건

- 인접하는 Block요소끼리만 일어난다.  
- 상하단만 병합현상이 일어난다(좌우의 여백의 병합은 일어나지 않음).

### 블록요소의 상하단 마진의 병합

![상하단 마진의 병합그림](https://images.velog.io/images/ursr0706/post/67d3104c-5e30-4421-8b82-52ea208318d1/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202020-07-19%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2010.24.56.png)

인접하는 두 블록요소에 각각 `margin:20px;`의 속성을 줬을 때,
위의 그림을 보면 section1의 하단 마진부분과 section2의 상단 마진부분이 서로 겹쳐져서  
그 사이의 마진이 총 40px이 아닌 20px이 되는 것을 볼 수 있다.  
이렇게 마진병합현상은 의도된 현상이여서 디자인을 안정적으로 하는데 도움이 된다.  

### 부모 자식 요소간의 마진 병합

그런데 부모와 자식 요소간의 마진도 겹침 현상이 일어난다.  

![부모자식요소](https://images.velog.io/images/ursr0706/post/b066ab8e-caf1-4fdb-a054-b9de584ed7e8/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202020-07-19%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2011.12.07.png)

이렇게 부모요소와 자식요소가 있을 때 먼저, 부모요소에는 margin값을 위아래 0 좌우 auto를 주고 자식요소에는 margin을 주지 않은 모습이다.  

그러다가 자식요소인 child에 margin값을 각각 50px씩 주면 어떻게 될까.  
부모와 자식요소간의 마진 병합현상이 없다고 생각하면 주황색 자식요소에 위 아래 좌 우 모두 50px씩 마진이 생겨서 parent의 흰색 background가 마치 숫자8처럼 보이게 될 것이라 예상할 수 있다.  
그러나 결과는 child의 위 아래 margin값이 들어가지 않아보이는 H모양의 결과가 나오게 된다.

![H모양의 결과](https://images.velog.io/images/ursr0706/post/4b61a8cd-b155-45a5-b19a-735bd87f6702/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202020-07-19%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2011.09.20.png)

숫자 8모양의 결과를 예상했던사람에게는 의도되지 않은 결과가 될 수 있다.  
child의 위 아래의 마진은 어디로 간걸까?  
바로, 부모요소의 마진으로 병합되어 마치 .parent요소의 마진처럼 표현 된 것이다.

![부모자식의 마진 병합그림](https://images.velog.io/images/ursr0706/post/e9ee3ec2-be38-4353-a122-e97ed9684713/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202020-07-19%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2010.52.25.png)  

위의 그림을 보면 부모요소의 마진으로 50px이 들어간 것을 알 수 있다.  
자식요소와 부모요소의 마진이 병합된 것인데, 앞서 살펴본 마진병합현상의 조건에 인접하는 블록요소의 상하단은 마진 병합이 일어난다고 했다.  
위의 예시는 부모자식요소 모두 div인 블록요소로 만들었다.  
때문에 상단의 마진과 하단의 마진이 병합된 결과가 나타난 것이다.  
그렇다면 내가 원하던 8자 모양이 되도록(child의 위아래 50px의 마진이 표시되게 하려면) 어떻게 해야할까?  

## 마진 병합현상 일어나지 않게 하기  

### 1. 공간을 차지하고있는 요소를 해당 자리에 넣기

```html
<div class="parent">
    나는 짱
    <div class="child">A</div>
    나는 내가 짱
    <div class="child">B</div>
    내가 짱
</div>
```

위 코드와 같이 parent와 A child요소 사이에 '나는 짱'이라는 텍스트를,  
B child요소와 parent의 닫힘태그 사이에 '내가 짱'이라는 텍스트를,  
그리고 A child와 B child사이의 마진병합또한 없애보기위해 둘 사이에 '나는 내가 짱'이라는 텍스트를 넣어보았다.  

![마진병합현상 없애기 시도](https://images.velog.io/images/ursr0706/post/2f5d361d-d904-40fc-a472-2ad7a65f437e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202020-07-19%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2011.50.27.png)

마진병합현상으로 표시되지 않았던 위아래 마진이 보이고 A child와 B child사이의 마진병합현상도 없어졌다.  
이렇게 공간을 차지하고있는 텍스트같은 요소가 마진 병합현상이 일어나는 자리에 있으면 마진 병합현상은 일어나지 않는다.  
부모와 자식이 온전히 떨어지기 때문이다.  
그러나 디자인상 이렇게 텍스트를 보이게 할 수는 없으니 text를 넣는것 대신 parent요소에 **border속성**을 준다거나 **padding속성**을 주는 것으로도 마진병합 현상을 없앨 수 있다.

```css
padding: 1px;
/* 또는 */
border: 1px solid transparent;
```

padding속성값을 1px주거나 또는 border를 투명한 선으로 1px 주게되면 마진 병합 현상을 없앨 수 있다.  

![패딩을 이용한 마진병합제거](https://images.velog.io/images/ursr0706/post/2b2ab095-1084-40e6-a8cd-e820a7e0616e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202020-07-19%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2012.00.21.png)

그러나 이렇게 되면 어쨌든 1px의 공간을 차지하는 것이기 때문에 의도한 디자인에서 1px의 오차가 발생하게되어 마진병합현상을 온전히 해결하는 해결책이라고는 볼 수 없다.  
그렇다면 오차가 발생하지 않게 하면서 마진병합현상을 없애는 방법에는 무엇이 있을까?

### 2.자식요소의 display속성값을 inline-block으로 바꾸기

```css
.child {
  display: inline-block;
}
```

마진병합현상의 조건으로는 인접하는 블록요소의 상하단은 마진이 병합되는 것이기 때문에 자식요소의 display속성값을 `inline-block`으로 바꿔주는것으로 간단히 해결이 된다.

![inline-block으로 해결한 마진병합제거](https://images.velog.io/images/ursr0706/post/e0ee36ab-4722-435e-991d-b6cb9d8b68f9/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202020-07-19%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2012.12.27.png)

이렇게 자식요소의 속성값을 inline-block으로 바꿔주고나니 상단과 하단의 마진병합현상은 물론 A child요소와 B child요소 사이의 마진 병합현상까지도 제거되었다.
그.런.데...이때!!(서프라이즈 톤)  
그럼 만약 형제간의 마진병합은 냅두고 상하단의 부모자식간의 마진병합현상만 제거하고 싶다면 어떻게 해야할까?(그렇게 하는게 보기에 더 좋으니까)  
물론 제일 상단의 자식요소를 뺀 나머지 자식요소들의 margin-top값을 0으로 조절하면 되겠지만 그런 번거로운 방법 말고 다른 방법을 찾아보자.  

### 3. overflow:hidden; 속성을 이용하여 해결하기

![overflow를 이용한 마진병합제거](https://images.velog.io/images/ursr0706/post/c112150b-9dad-42f1-946c-d9775e351810/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202020-07-19%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%201.26.50.png)

```css
.parent {
  overflow: hidden;
}
```

부모요소의 속성값으로 `overflow:hidden;`을 주면 말끔히 해결된다.  
부모요소에게 `overflow:hidden;`속성값을 적용하면 새로운 block format context가 .parent요소 기준에서 만들어지면서 .parent의 마진과 .child의 마진은 별개가 되고, 안에 있는 child요소의 마진이 부모요소의 안에서 새로 시작할 수 있는 것이다.  
때문에 새로운 block format context에있는 자식요소인 child A요소의 위 여백과 child B요소의아래 여백이 표현되며 child A요소와 child B요소 사이의 마진은 그대로 병합된다.  

>참고영상
>[생활코딩-마진겹침](https://youtu.be/zZjTUDAR0ik)
>[마진병합 margin collapsing | 코딩가나다 | 빔캠프](https://youtu.be/c19Mjg-ivxc)

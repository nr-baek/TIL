# 타입 변환과 단축 평가

## 타입 변환

자바스크립트에서 값의 타입은 상황 따라 다른 타입으로 변환할 수 있다.  

### 명시적 타입 변환(explicit coercion)

개발자의 의도에 따라 값의 타입을 다른 타입으로 변환할 수 있는데, 이를 명시적 타입 변환 또는 타입 캐스팅이라 한다.  

```javascript
var x = 10;

// 명시적 타입 변환
// 숫자를 문자열로 타입 캐스팅한다.
var str = x.toString();
console.log(typeof str, str); // string 10
```

### 암묵적 타입 변환(implicit coercion)

개발자의 의도와는 상관없이 표현식을 평가하는 도중에 자바스크립트 엔진에 의해 암묵적으로 타입이 자동 변환되기도 한다. 이를 암묵적 타입 변환 또는 타입 강제 변환이라고 한다.

```javascript
var x = 10;

// 암묵적 타입 변환
// 문자열 연결 연산자는 숫자 타입 x의 값을 바탕으로 새로운 문자열을 생성한다.
var str = x + '';
console.log(typeof str, str); // string 10
```

자바스크립트 엔진은 표현식을 평가할 때 코드의 문맥에 부합하지 않는 다양한 상황에서 가급적 에러를 발생시키지 않도록 암묵적 타입 변환을 통해 표현식을 평가한다.

```javascript
// 피연산자가 모두 문자열 타입이어야 하는 문맥
'10' + 2 // -> '102'출력
// 숫자2를 문자열 타입으로 변환

// 피연산자가 모두 숫자 타입이어야 하는 문맥
5 * '10' // -> 50
// 문자열 10을 숫자 타입으로 변환

// 피연산자 또는 표현식이 불리언 타입이어야 하는 문맥
!0 // -> true
// 숫자0을 불리언 타입으로 변환
if (1) { }
// 숫자1을 불리언 타입으로 변환
```

## 단축 평가

논리 연산자를 사용한 표현식은 언제나 2개의 피연산자 중 어느 한쪽으로 평가된다.
단축 평가는 다음의 규칙을 따른다.

|연산자|설명|반환값|
|:------:|-----|----|
|&&|좌항과 우항이 모두 참인가?|좌항, 우항이 모두 참이면 참<br />하나라도 참이 아니면 거짓|
|\| \||좌항 혹은 우항이 하나라도 참인가?|좌항, 우항 하나라도 참이면 참<br />둘다 참이 아니라면 거짓|

### OR 논리 연산자와 표현식 평가

- OR 논리 연산자는 표현식 중 하나라도 참이면 결과는 참
  - 앞의 표현식이 참이면 두번째 표현식은 평가조차 안함

`if( 1 + 1 == 2 || 1 + 2 == 2 )`

- `1 + 1 == 2` 표현식 평가 함(참)
- 조건식의 결과는 참이 된다.
- 이미 첫 번째 표현식이 참이므로 두 번째 `1 + 2 ==2`표현식은 평가할 필요도 없음(실행되지 않음)

```javascript
// 이 코드를 실행한 결과는?

var num1 = 10;
var num2 = 20;
if (num1 ==10 || ++num2 == 20)
{
    num1++;
}

console.log(num1);
console.log(num2);
// 11, 20 출력
```

1. 첫 번째 `num1 == 10` 표현식 평가함
    - 참
2. OR 논리 연산자는 하나라도 참이면 결과는 참이므로 두 번째 `++num2 == 20` 표현식은 실행 시도조차 안함
3. 조건식이 참이므로 `num1++ ;`실행
    - 따라서 num1은 11이 되고 num2는 그대로 20

### AND 논리 연산자와 표현식 평가

- AND 논리 연산자는 표현식이 모두 참일때만 결과가 참
  - 첫 번째 표현식이 참이면 다음 표현식을 평가함
- 표현식이 하나라도 거짓이면 결과는 거짓
  - 첫 번째 표현식이 거짓이 되면 다음 표현식은 평가조차 안함

#### 첫 번째 표현식이 참일 때

`if( 1 + 1 == 2 && 1 + 2 == 2)`

- 첫 번째 `1 + 1 == 2` 표현식 평가 함(참)
- 두 번째 `1 + 2 == 2` 표현식 평가 함(거짓)
- 표현식을 모두 평가/실행 하고 조건문의 결과는 거짓이 된다.

#### 첫 번째 표현식이 거짓일 때

`if( 1 + 2 == 2 && 1 + 1 == 2)`

- 첫 번째 `1 + 2 == 2` 표현식 평가 함
  - 거짓
- AND 논리 연산자는 하나라도 거짓이면 결과는 어차피 거짓이므로 두 번째 `1 + 1 = 2`표현식은 평가 시도조차 안함
